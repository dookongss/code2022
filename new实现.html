<script>
  function myNew(context) {
    // 创建一个新的空对象
    const obj = new Object()
    // 设置空对象的__proto__为构造函数的prototype
    obj.__proto__ = context.prototype
    // 构造函数的this指向这个对象，执行构造函数的代码（为新对象添加属性）
    const res = context.apply(obj,[...arguments].slice(1))
    // 判断函数的返回值类型，如果是引用类型，就返回
    return typeof res === 'object' ? res : obj
  }

  function One(name, age) {
    this.name = name
    this.age = age
    // return { 'val': 123 }
  }
  let obj = myNew(One,'tom',18)
  console.log(obj)
</script>