<script>
  function myNew(context) {
    // 创建一个新的空对象
    const obj = new Object()
    // 设置空对象的__proto__为构造函数的prototype
    obj.__proto__ = context.prototype
    // 构造函数的this指向这个对象，执行构造函数的代码（为新对象添加属性）
    const res = context.apply(obj,[...arguments].slice(1))
    // 判断函数的返回值类型，如果是引用类型([],{},null)，就返回引用类型；如果是值类型，返回创建的对象(function)
    return typeof res === 'object' ? res : obj
  }

  function One(name, age) {
    this.name = name
    this.age = age
    // return { 'val': 123 }
  }
  let obj = myNew(One,'tom',18)
  console.log(obj)


  /**
   * 以可以总结出来 new 的特性如下：
   *  1.new 创建出来的实例可以访问到构造函数中的属性
      2.new 创建出来的实例可以访问到构造函数原型链中的属性，也就是说通过 new 操作符，实例与构造函数通过原型链连接了起来
      3.构造函数如果返回原始值，这个返回值没有意义
      4.构造函数如果返回对象，创建的实例为返回值的结果
   */


</script>